{% extends "page.html" %}
{% block title %}Results | {{ source.name }}{% endblock %}
{% block page_content %}
  <h1>{{ source.title }}</h1>
  <p class="lead">
    There are {{ headphones|length }} headphones listed, use search and sort to find yours.
  </p>
  {% if source.description is defined %}
  <p>
    {{ source.description }}
  </p>
  {% endif %}
  <p>
    Once you've found your headphones to download a zip archive containing a
    pair of convolution filters (WAV files). These correct your headphones to an
    appropriate Harman target. They should sound better using them, but YMMV.
  </p>
  <table class="table table-striped" data-toggle="table" data-search="true" aria-describedby="Filters by headphone">
    <thead class="thead-dark">
      <tr>
        <th scope="col" data-field="type" data-sortable="false" searchable="false">Type</th>
        <th scope="col" data-field="name" data-sortable="true">Name</th>
        <th scope="col" data-field="download" data-sortable="false" searchable="false">Download Filters</th>
      </tr>
    </thead>
    <tbody>
    {{ phone_rows(headphones) }}
    </tbody>
  </table>
{% endblock page_content %}

{% macro phone_rows(headphones) %}
  {%- for model in headphones -%}
    {{ phone_row(model) }}
  {%- endfor -%}
{% endmacro %}

{% macro phone_row(model) %}
    <tr>
      <td><img src="{{ url_for('static', filename='img/' + model.type.icon) }}" alt="{{ model.type.alt }} headphones."/></td>
      <td><a href="/phones/{{ model.name }}">{{ model.name }}</a></td>
      <td><a href="/api/filters/{{ model.source }}/{{ model.target }}/{{ model.name }}"><i class="fas fa-file-archive fa-2x"></i></a></td>
    </tr>
{% endmacro %}
